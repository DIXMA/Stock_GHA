{% extends 'base.html' %}

{% block content %}

    <div class="row">
        <div class="col-md-12">
            <div class="box box-default" style="overflow: auto;">
                <div class="box-header">
                    <h3 class="box-title">Seguimiento al proyecto: </h3>
                    <div class="box-tools pull-right">
                        <a href="{% url 'projects_details' pr_pk=project.id %}"
                           class="btn btn-default">Volver</a>
                        <button class="btn btn-default" data-toggle="modal"
                                data-target="#modalAddProjectManagerPrs">
                            <i class="fa fa-odnoklassniki"></i> Seguimiento
                            Personal
                        </button>
                        <button class="btn btn-default" data-toggle="modal"
                                data-target="#modalAddProjectManagerMach">
                            <i class="fa fa-industry"></i> Seguimiento Maquina
                        </button>
                    </div>
                </div>
                <div class="box-body">

                    <div class="row">
                        <div class="col-lg-6">
                            {% if prj_manager_man %}
                                <table class="chasas_table_border">
                                    <thead>
                                    <tr>
                                        <th colspan="8">PERSONAL</th>
                                    </tr>
                                    <tr>
                                        <th>ID</th>
                                        <th>FECHA</th>
                                        <th>PROCESO</th>
                                        <th>INICIO</th>
                                        <th>FIN</th>
                                        <th>TOTAL HORAS</th>
                                        <th>TIPO EMPLEADO</th>
                                        <th>COSTO REAL MO</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for mman in prj_manager_man %}
                                        <tr>
                                            <td>{{ mman.id }}</td>
                                            <td>{{ mman.date_man }}</td>
                                            <td>{{ mman.process_man }}</td>
                                            <td>{{ mman.init_hour_man }}</td>
                                            <td>{{ mman.end_hour_man }}</td>
                                            <td>{{ mman.total_hour_man }}</td>
                                            <td>{{ mman.type_employee_man }}</td>
                                            <td>${{ mman.price_real_man }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            {% else %}
                                No hay registro de seguimiento al personal en el
                                proyecto.
                            {% endif %}
                        </div>
                        <div class="col-lg-6">
                            {% if prj_manager_machine %}
                                <table class="chasas_table_border">
                                    <thead>
                                    <tr>
                                        <th colspan="12">MAQUINARIA</th>
                                    </tr>
                                    <tr>
                                        <th rowspan="2">ID</th>
                                        <th rowspan="2">FECHA</th>
                                        <th rowspan="2">MAQUINA</th>
                                        <th colspan="2">MAÑANA</th>
                                        <th rowspan="2">TIEMPO PAUSA</th>
                                        <th colspan="2">TARDE</th>
                                        <th rowspan="2">TIEMPO PAUSA</th>
                                        <th rowspan="2">TOTAL PAUSAS</th>
                                        <th rowspan="2">TOTAL HORAS TRABAJADAS</th>
                                        <th rowspan="2">TOTAL REAL HORAS TRABAJADAS</th>
                                    </tr>
                                    <tr>
                                        <th>Inicio</th>
                                        <th>Fin</th>
                                        <th>Inicio</th>
                                        <th>Fin</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for hm in prj_manager_machine %}
                                        <tr>
                                            <td>{{ hm.id }}</td>
                                            <td>{{ hm.date_mach }}</td>
                                            <td>{{ hm.type_machine }}</td>
                                            <td>{{ hm.morning_init_time }}</td>
                                            <td>{{ hm.morning_end_time }}</td>
                                            <td>{{ hm.morning_stop_time }}</td>
                                            <td>{{ hm.evening_init_time }}</td>
                                            <td>{{ hm.evening_end_time }}</td>
                                            <td>{{ hm.evening_stop_time }}</td>
                                            <td>{{ hm.evening_stop_time }}</td>
                                            <td>{{ hm.total_works_our }}</td>
                                            <td>{{ hm.total_real_works_our }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            {% else %}
                                No hay registro de seguimiento a maquinaria en
                                el proyecto.
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--
    <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th colspan="13">PERSONAL</th>
                                    </tr>
                                    <tr>
                                        <th rowspan="2">Fecha</th>
                                        <th rowspan="2">Proceso</th>
                                        <th colspan="5">Hora-Hombre</th>
                                        <th colspan="5">Hora-Maquina</th>
                                        <th rowspan="2">Recursos</th>
                                    </tr>
                                    <tr>
                                        <th>Inicio</th>
                                        <th>Final</th>
                                        <th>Total Horas</th>
                                        <th>Tipo de empleado</th>
                                        <th>Costo Real MO</th>
                                        <th>Inicio</th>
                                        <th>Final</th>
                                        <th>Costo Horas</th>
                                        <th>Tipo de Maquina</th>
                                        <th>Costo Real MA</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for prm in prj_manager %}
                                        <tr>
                                            <td>{{ prm.date_man }}</td>
                                            <td>{{ prm.process_man }}</td>
                                            <td>{{ prm.init_hour_man }}</td>
                                            <td>{{ prm.end_hour_man }}</td>
                                            <td>{{ prm.total_hour_man }}</td>
                                            <td>{{ prm.type_employee_man }}</td>
                                            <td>{{ prm.price_real_man }}</td>
                                            <td>{{ prm.init_hour_machine }}</td>
                                            <td>{{ prm.end_hour_machine }}</td>
                                            <td>{{ prm.total_hour_machine }}</td>
                                            <td>{{ prm.price_machine }}</td>
                                            <td>{{ prm.price_real_machine }}</td>
                                            <td>{{ prm.resources_machine }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
    -->

    <!-- Modal MachineHours -->
    <div class="modal fade" id="modalAddProjectManagerMach" tabindex="-1"
         role="dialog"
         aria-labelledby="modalAddProjectManagerMachLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"
                        id="modalAddProjectManagerMachLabelLabel">
                        <i class="fa fa-industry"></i> Seguimiento Maquinaria
                    </h4>
                </div>
                <form action="{% url 'projects_manager_add_mach' %}"
                      method="post">
                    {% csrf_token %}
                    <div class="modal-body">
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label>Fecha:</label>
                                <input type="date" class="form-control"
                                       id="date_mach" name="date_mach" value=""
                                       title="Fecha" required>
                            </div>
                            <div class="form-group col-sm-6">
                                <label>Proceso</label>
                                <select class="form-control"
                                        id="process_select"
                                        name="process_select" required>
                                    <option value="Lavado">Lavado</option>
                                    <option value="Desinfectado">Desinfectado
                                    </option>
                                    <option value="Desarmada">Desarmada</option>
                                    <option value="Armada">Armada</option>
                                    <option value="Mecanica">Mecanica</option>
                                    <option value="Hidraulica">Hidraulica
                                    </option>
                                    <option value="Niquelado">Niquelado</option>
                                    <option value="Pintura Praymer">Pintura
                                        Praymer
                                    </option>
                                    <option value="Pintura Electrostática">
                                        Pintura
                                        Electrostática
                                    </option>
                                    <option value="Pintura Epoxica Tuberia">
                                        Pintura
                                        Epoxica Tuberia
                                    </option>
                                    <option value="Pintura Epoxica Lámina">
                                        Pintura
                                        Epoxica Lámina
                                    </option>
                                    <option value="Sanblasting">Sanblasting
                                    </option>
                                    <option value="Banco">Banco</option>
                                    <option value="Corte Manual">Corte Manual
                                    </option>
                                    <option value="Corte con máquina">Corte con
                                        máquina
                                    </option>
                                    <option value="Dobleces con máquina">
                                        Dobleces
                                        con máquina
                                    </option>
                                    <option value="Esmeril">Esmeril</option>
                                    <option value="Pulidora">Pulidora</option>
                                    <option value="Motor tool">Motor tool
                                    </option>
                                    <option value="Limada">Limada</option>
                                    <option value="Lijada">Lijada</option>
                                    <option value="Carbo Streep">Carbo Streep
                                    </option>
                                    <option value="Almidonada">Almidonada
                                    </option>
                                    <option value="Dobleces banco">Dobleces
                                        banco
                                    </option>
                                    <option value="Curvado de Tubo">Curvado de
                                        Tubo
                                    </option>
                                    <option value="Troquelado Manual">Troquelado
                                        Manual
                                    </option>
                                    <option value="Cuñero manual">Cuñero manual
                                    </option>
                                    <option value="Espichado de Tubo">Espichado
                                        de
                                        Tubo
                                    </option>
                                    <option value="Taladro">Taladro</option>
                                    <option value="Roscado manual">Roscado
                                        manual
                                    </option>
                                    <option value="Fresado">Fresado</option>
                                    <option value="Obra civil">Obra civil
                                    </option>
                                    <option value="Remachado">Remachado</option>
                                    <option value="Soldadura de Arco">Soldadura
                                        de
                                        Arco
                                    </option>
                                    <option value="Soldadura MIC">Soldadura MIC
                                    </option>
                                    <option value="Soldadura TIC">Soldadura TIC
                                    </option>
                                    <option value="Soldadura Oxiacetilenica">
                                        Soldadura Oxiacetilenica
                                    </option>
                                    <option value="Soldadura aluminio">Soldadura
                                        aluminio
                                    </option>
                                    <option value="Corte laser">Corte laser
                                    </option>
                                    <option value="Brillada">Brillada</option>
                                    <option value="Brillada con pulimento">
                                        Brillada
                                        con pulimento
                                    </option>
                                    <option value="Lavado">Lavado</option>
                                    <option value="Pintada">Pintada</option>
                                    <option value="Empacado">Empacado</option>
                                    <option value="Telecarga">Telecarga</option>
                                    <option value="Taxicamioneta">Taxicamioneta
                                    </option>
                                    <option value="Transp.Intermunicipal">
                                        Transp. Intermunicipal
                                    </option>
                                    <option value="Transportes urbanos bus">
                                        Transportes urbanos bus
                                    </option>
                                    <option value="Transportes urbanos taxi">
                                        Transportes urbanos taxi
                                    </option>
                                    <option value="Grua">Grua</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-12">
                                <label>Maquina</label>
                                <input type="text" class="form-control"
                                       id="type_machine" name="type_machine"
                                       required>
                            </div>
                            <div class="form-group col-sm-12">
                                <h4>Mañana</h4>
                            </div>
                            <div class="form-group col-sm-4">
                                <label>Hora inicio:</label>
                                <input type="time" class="form-control"
                                       id="morning_init_time"
                                       name="morning_init_time" required>
                            </div>
                            <div class="form-group col-sm-4">
                                <label>Hora final:</label>
                                <input type="time" class="form-control"
                                       id="morning_end_time"
                                       name="morning_end_time" required>
                            </div>
                            <div class="form-group col-sm-4">
                                <label>Tiempo de pausas</label>
                                <input type="number" class="form-control"
                                       id="morning_stop_time"
                                       name="morning_stop_time" required>
                            </div>
                            <div class="form-group col-sm-12">
                                <h4>Tarde</h4>
                            </div>
                            <div class="form-group col-sm-4">
                                <label>Hora inicio:</label>
                                <input type="time" class="form-control"
                                       id="evening_init_time"
                                       name="evening_init_time" required>
                            </div>
                            <div class="form-group col-sm-4">
                                <label>Hora final:</label>
                                <input type="time" class="form-control"
                                       id="evening_end_time"
                                       name="evening_end_time" required>
                            </div>
                            <div class="form-group col-sm-4">
                                <label>Tiempo de pausas</label>
                                <input type="number" class="form-control"
                                       id="evening_stop_time"
                                       name="evening_stop_time" required>
                            </div>
                            <div class="form-group col-sm-12">
                                <h4>Totales</h4>
                            </div>
                            <div class="form-group col-sm-6">
                                <label>Total horas trabajadas</label>
                                <input type="number" class="form-control"
                                       id="total_works_our"
                                       name="total_works_our" required>
                            </div>
                            <div class="form-group col-sm-6">
                                <label>Total horas reales trabajadas</label>
                                <input type="number" class="form-control"
                                       id="total_real_works_our"
                                       name="total_real_works_our" required>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="hidden" name="pr_pk"
                               value="{{ project.id }}">
                        <input type="hidden" name="type_register"
                               value="mach">
                        <button type="button" class="btn btn-default"
                                data-dismiss="modal">
                            <i class="fa fa-close"></i> Cerrar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fa fa-save"></i> Guardar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal ManHours -->
    <div class="modal fade" id="modalAddProjectManagerPrs" tabindex="-1"
         role="dialog"
         aria-labelledby="modalAddProjectManagerPrsLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modalAddProjectManagerPrsLabel">
                        <i class="fa fa-odnoklassniki"></i> Sguimiento a
                        Personal</h4>
                </div>
                <form action="{% url 'projects_manager_add_prs' %}"
                      method="post">
                    {% csrf_token %}
                    <div class="modal-body">
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label>Fecha:</label>
                                <input type="date" class="form-control"
                                       id="date_prc" name="date_prc" value=""
                                       title="Fecha" required>
                            </div>
                            <div class="form-group col-sm-6">
                                <label>Proceso</label>
                                <select class="form-control"
                                        id="process_select"
                                        name="process_select" required>
                                    <option value="Lavado">Lavado</option>
                                    <option value="Desinfectado">Desinfectado
                                    </option>
                                    <option value="Desarmada">Desarmada</option>
                                    <option value="Armada">Armada</option>
                                    <option value="Mecanica">Mecanica</option>
                                    <option value="Hidraulica">Hidraulica
                                    </option>
                                    <option value="Niquelado">Niquelado</option>
                                    <option value="Pintura Praymer">Pintura
                                        Praymer
                                    </option>
                                    <option value="Pintura Electrostática">
                                        Pintura
                                        Electrostática
                                    </option>
                                    <option value="Pintura Epoxica Tuberia">
                                        Pintura
                                        Epoxica Tuberia
                                    </option>
                                    <option value="Pintura Epoxica Lámina">
                                        Pintura
                                        Epoxica Lámina
                                    </option>
                                    <option value="Sanblasting">Sanblasting
                                    </option>
                                    <option value="Banco">Banco</option>
                                    <option value="Corte Manual">Corte Manual
                                    </option>
                                    <option value="Corte con máquina">Corte con
                                        máquina
                                    </option>
                                    <option value="Dobleces con máquina">
                                        Dobleces
                                        con máquina
                                    </option>
                                    <option value="Esmeril">Esmeril</option>
                                    <option value="Pulidora">Pulidora</option>
                                    <option value="Motor tool">Motor tool
                                    </option>
                                    <option value="Limada">Limada</option>
                                    <option value="Lijada">Lijada</option>
                                    <option value="Carbo Streep">Carbo Streep
                                    </option>
                                    <option value="Almidonada">Almidonada
                                    </option>
                                    <option value="Dobleces banco">Dobleces
                                        banco
                                    </option>
                                    <option value="Curvado de Tubo">Curvado de
                                        Tubo
                                    </option>
                                    <option value="Troquelado Manual">Troquelado
                                        Manual
                                    </option>
                                    <option value="Cuñero manual">Cuñero manual
                                    </option>
                                    <option value="Espichado de Tubo">Espichado
                                        de
                                        Tubo
                                    </option>
                                    <option value="Taladro">Taladro</option>
                                    <option value="Roscado manual">Roscado
                                        manual
                                    </option>
                                    <option value="Fresado">Fresado</option>
                                    <option value="Obra civil">Obra civil
                                    </option>
                                    <option value="Remachado">Remachado</option>
                                    <option value="Soldadura de Arco">Soldadura
                                        de
                                        Arco
                                    </option>
                                    <option value="Soldadura MIC">Soldadura MIC
                                    </option>
                                    <option value="Soldadura TIC">Soldadura TIC
                                    </option>
                                    <option value="Soldadura Oxiacetilenica">
                                        Soldadura Oxiacetilenica
                                    </option>
                                    <option value="Soldadura aluminio">Soldadura
                                        aluminio
                                    </option>
                                    <option value="Corte laser">Corte laser
                                    </option>
                                    <option value="Brillada">Brillada</option>
                                    <option value="Brillada con pulimento">
                                        Brillada
                                        con pulimento
                                    </option>
                                    <option value="Lavado">Lavado</option>
                                    <option value="Pintada">Pintada</option>
                                    <option value="Empacado">Empacado</option>
                                    <option value="Telecarga">Telecarga</option>
                                    <option value="Taxicamioneta">Taxicamioneta
                                    </option>
                                    <option value="Transp.Intermunicipal">
                                        Transp. Intermunicipal
                                    </option>
                                    <option value="Transportes urbanos bus">
                                        Transportes urbanos bus
                                    </option>
                                    <option value="Transportes urbanos taxi">
                                        Transportes urbanos taxi
                                    </option>
                                    <option value="Grua">Grua</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label>Inicio</label>
                                <input type="time" class="form-control"
                                       id="hman_init" name="hman_init" required>
                            </div>
                            <div class="form-group col-sm-6">
                                <label>Final</label>
                                <input type="time" class="form-control"
                                       id="hman_end" name="hman_end" required>
                            </div>
                            <div class="form-group col-sm-12">
                                <label>Tipo Empleado</label>
                                <select class="form-control"
                                        name="type_employee" id="type_employee"
                                        required>
                                    <option value="Ayudante, 4167">Ayudante
                                    </option>
                                    <option value="Tecnico, 6250">Tecnico
                                    </option>
                                    <option value="Especialista, 8333">
                                        Especialista
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="hidden" name="pr_pk"
                                   value="{{ project.id }}">
                            <input type="hidden" name="type_register"
                                   value="prs">
                            <button type="button" class="btn btn-default"
                                    data-dismiss="modal">
                                <i class="fa fa-close"></i> Cerrar
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fa fa-save"></i> Guardar
                            </button>
                        </div>
                </form>
            </div>
        </div>
    </div>

{% endblock %}